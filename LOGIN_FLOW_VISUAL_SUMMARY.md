# Login Flow - One-Page Visual Summary

## Start to Finish

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                               â”‚
â”‚  User Journey: https://meal-planner-gold-one.vercel.app/                    â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: HOMEPAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   VERCEL (Frontend)         â”‚
            â”‚   Load React App            â”‚
            â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
            â”‚   â”‚ [Google Login BTN]  â”‚   â”‚
            â”‚   â”‚                     â”‚   â”‚
            â”‚   â”‚ "Sign in with       â”‚   â”‚
            â”‚   â”‚  Google"            â”‚   â”‚
            â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ User clicks button
                         â”‚
                         â–¼


STEP 2: GOOGLE OAUTH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  GOOGLE          â”‚
            â”‚  OAuth Server    â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
            â”‚  â”‚ Login Form â”‚  â”‚
            â”‚  â”‚            â”‚  â”‚
            â”‚  â”‚ Email:     â”‚  â”‚
            â”‚  â”‚ Password:  â”‚  â”‚
            â”‚  â”‚ [Login]    â”‚  â”‚
            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ User enters credentials
                     â”‚
                     â–¼
                (Validated)
                     â”‚
                     â”‚ Authorization code
                     â”‚
                     â–¼


STEP 3: BACKEND VALIDATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  RENDER Backend (server.js)     â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
         â”‚  â”‚ /auth/google/callback       â”‚â”‚
         â”‚  â”‚                             â”‚â”‚
         â”‚  â”‚ 1. Receive OAuth code       â”‚â”‚
         â”‚  â”‚ 2. Exchange for profile     â”‚â”‚
         â”‚  â”‚ 3. Query database:          â”‚â”‚
         â”‚  â”‚                             â”‚â”‚
         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
         â”‚  â”‚  â”‚ Render PostgreSQL     â”‚ â”‚â”‚
         â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚â”‚
         â”‚  â”‚  â”‚ â”‚ users table     â”‚   â”‚ â”‚â”‚
         â”‚  â”‚  â”‚ â”‚ id: 'uuid-123'  â”‚   â”‚ â”‚â”‚
         â”‚  â”‚  â”‚ â”‚ email: 'u@e.com'â”‚   â”‚ â”‚â”‚
         â”‚  â”‚  â”‚ â”‚ role: 'admin' âœ“ â”‚   â”‚ â”‚â”‚
         â”‚  â”‚  â”‚ â”‚ status: 'active'â”‚   â”‚ â”‚â”‚
         â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚â”‚
         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
         â”‚  â”‚                             â”‚â”‚
         â”‚  â”‚ 4. Create JWT token:       â”‚â”‚
         â”‚  â”‚    {                       â”‚â”‚
         â”‚  â”‚      id: 'uuid-123',      â”‚â”‚
         â”‚  â”‚      email: 'u@e.com',    â”‚â”‚
         â”‚  â”‚      role: 'admin' â† FIX! â”‚â”‚
         â”‚  â”‚      status: 'active' â†FIXâ”‚â”‚
         â”‚  â”‚      ...other fields      â”‚â”‚
         â”‚  â”‚    }                      â”‚â”‚
         â”‚  â”‚                             â”‚â”‚
         â”‚  â”‚ 5. Redirect with token    â”‚â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Token in URL hash
                         â”‚
                         â–¼


STEP 4: FRONTEND STORES TOKEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  VERCEL (Frontend)               â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚ Token Received             â”‚  â”‚
         â”‚  â”‚                            â”‚  â”‚
         â”‚  â”‚ localStorage:              â”‚  â”‚
         â”‚  â”‚ auth_token =               â”‚  â”‚
         â”‚  â”‚  eyJ0eXAiOiJKV1QiLCJhbGc  â”‚  â”‚
         â”‚  â”‚  ...                       â”‚  â”‚
         â”‚  â”‚                            â”‚  â”‚
         â”‚  â”‚ Decoded token:             â”‚  â”‚
         â”‚  â”‚ {                          â”‚  â”‚
         â”‚  â”‚   id: 'uuid-123',         â”‚  â”‚
         â”‚  â”‚   email: 'u@example.com', â”‚  â”‚
         â”‚  â”‚   role: 'admin' âœ“         â”‚  â”‚
         â”‚  â”‚   status: 'active' âœ“      â”‚  â”‚
         â”‚  â”‚ }                          â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ User state updated
                         â”‚
                         â–¼


STEP 5: APP SWITCHBOARD DISPLAYED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  VERCEL (Frontend)               â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚   ASR Digital Services     â”‚  â”‚
         â”‚  â”‚  Welcome back, user!       â”‚  â”‚
         â”‚  â”‚  [ğŸšª Logout]               â”‚  â”‚ â† NEW!
         â”‚  â”‚                            â”‚  â”‚
         â”‚  â”‚ Choose Your App:           â”‚  â”‚
         â”‚  â”‚                            â”‚  â”‚
         â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
         â”‚  â”‚ â”‚ ğŸ½ï¸ Meal  â”‚ â”‚ ğŸ¥— Nutr. â”‚  â”‚  â”‚
         â”‚  â”‚ â”‚ Planner  â”‚ â”‚          â”‚  â”‚  â”‚
         â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
         â”‚  â”‚                            â”‚  â”‚
         â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
         â”‚  â”‚ â”‚ ğŸ’ª Fit.  â”‚ â”‚ ğŸ” Admin â”‚  â”‚  â”‚
         â”‚  â”‚ â”‚          â”‚ â”‚(if admin)â”‚  â”‚  â”‚
         â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚           â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                     â”‚
       â–¼                                     â–¼
   CLICK MEAL              CLICK FITNESS
   PLANNER                 APP


STEP 6a: MEAL PLANNER FLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Frontend         â”‚         â”‚ Backend      â”‚      â”‚ Database    â”‚
    â”‚ MealPlanView.js  â”‚         â”‚ server.js    â”‚      â”‚ Render DB   â”‚
    â”‚                  â”‚         â”‚              â”‚      â”‚             â”‚
    â”‚ Makes API call:  â”‚         â”‚ GET /api/    â”‚      â”‚ SELECT      â”‚
    â”‚ GET /api/meals â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚ meals        â”‚â”€â”€â”€â”€â”€â”€â†’ meals       â”‚
    â”‚                  â”‚         â”‚              â”‚      â”‚ WHERE       â”‚
    â”‚ Uses: Session    â”‚         â”‚ Check:       â”‚      â”‚ user_id=123 â”‚
    â”‚ (session.role =  â”‚         â”‚ req.session. â”‚      â”‚             â”‚
    â”‚  'admin' âœ“)      â”‚         â”‚ user.role    â”‚      â”‚ Return:     â”‚
    â”‚                  â”‚         â”‚              â”‚      â”‚ Meal data   â”‚
    â”‚ Display:         â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Response â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
    â”‚ â”œâ”€ Meals         â”‚         â”‚              â”‚      â”‚             â”‚
    â”‚ â”œâ”€ Admin ops âœ“   â”‚         â”‚ Admin? YES âœ“ â”‚      â”‚             â”‚
    â”‚ â””â”€ Logout        â”‚         â”‚              â”‚      â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 6b: FITNESS APP FLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Frontend         â”‚    â”‚ Backend          â”‚   â”‚ Database        â”‚
    â”‚ FitnessApp.js    â”‚    â”‚ fitness.js       â”‚   â”‚ Render DB       â”‚
    â”‚                  â”‚    â”‚                  â”‚   â”‚                 â”‚
    â”‚ localStorage:    â”‚    â”‚ GET /api/fitness â”‚   â”‚ SELECT fitness_ â”‚
    â”‚ auth_token âœ“     â”‚    â”‚ /profile         â”‚   â”‚ profiles        â”‚
    â”‚                  â”‚    â”‚                  â”‚   â”‚ WHERE user_id=  â”‚
    â”‚ Makes API call:  â”‚    â”‚ Verify JWT âœ“     â”‚   â”‚ 123             â”‚
    â”‚ Header: Auth:    â”‚    â”‚ Extract role âœ“   â”‚   â”‚                 â”‚
    â”‚ Bearer + token â”€â”€â”€â”€â”€â”€â†’â”‚ from token       â”‚â”€â”€â”€â†’ Return:        â”‚
    â”‚                  â”‚    â”‚                  â”‚   â”‚ Profile data    â”‚
    â”‚ User state:      â”‚    â”‚ Check:           â”‚   â”‚                 â”‚
    â”‚ role='admin' âœ“   â”‚    â”‚ req.user.role = =   â”‚                 â”‚
    â”‚                  â”‚    â”‚ 'admin'? YES! âœ“âœ“ â”‚   â”‚                 â”‚
    â”‚ Display:         â”‚â†â”€â”€â”€â”‚ Response â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
    â”‚ â”œâ”€ Workouts      â”‚    â”‚                  â”‚   â”‚                 â”‚
    â”‚ â”œâ”€ AI Coach      â”‚    â”‚ Admin features   â”‚   â”‚                 â”‚
    â”‚ â”œâ”€ Admin ops âœ“   â”‚    â”‚ available! âœ“âœ“    â”‚   â”‚                 â”‚
    â”‚ â””â”€ Logout        â”‚    â”‚                  â”‚   â”‚                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 7: ADMIN FEATURES (Both Apps)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    Admin User Login:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                  â”‚
    â”‚ Database: role = 'admin'                        â”‚
    â”‚    â†“                                            â”‚
    â”‚ JWT Token: role = 'admin'                       â”‚
    â”‚    â†“                                            â”‚
    â”‚ Meal Planner: req.session.role = 'admin' âœ“    â”‚
    â”‚    â””â”€ Admin button appears                      â”‚
    â”‚    â””â”€ User management available                 â”‚
    â”‚    â””â”€ Settings access available                 â”‚
    â”‚    â†“                                            â”‚
    â”‚ Fitness App: req.user.role = 'admin' âœ“         â”‚
    â”‚    â””â”€ Admin interview questions available       â”‚
    â”‚    â””â”€ Workout management available              â”‚
    â”‚    â””â”€ AI Coach admin features available         â”‚
    â”‚    â†“                                            â”‚
    â”‚ Admin Panel: Full access âœ“                      â”‚
    â”‚    â””â”€ User management                           â”‚
    â”‚    â””â”€ Role assignment                           â”‚
    â”‚    â””â”€ System settings                           â”‚
    â”‚                                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 8: LOGOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  App Switchboard                         â”‚
    â”‚                                          â”‚
    â”‚  User clicks: [ğŸšª Logout] (in header)   â”‚
    â”‚                    â”‚                     â”‚
    â”‚                    â–¼                     â”‚
    â”‚  Frontend:                               â”‚
    â”‚  localStorage.removeItem('auth_token')   â”‚
    â”‚                    â”‚                     â”‚
    â”‚                    â–¼                     â”‚
    â”‚  Redirect to: /login page                â”‚
    â”‚                    â”‚                     â”‚
    â”‚                    â–¼                     â”‚
    â”‚  User must log in again                  â”‚
    â”‚                                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

KEY POINTS:

1ï¸âƒ£  Frontend: Vercel (React)
    â”œâ”€ Stores JWT in localStorage
    â”œâ”€ Sends token with every API call
    â””â”€ Displays UI based on user.role

2ï¸âƒ£  Backend: Render (Node.js/Express)
    â”œâ”€ Validates JWT tokens
    â”œâ”€ Checks user.role for permissions
    â””â”€ Queries Render PostgreSQL

3ï¸âƒ£  Database: Render PostgreSQL (PRIMARY)
    â”œâ”€ Stores user records with role & status
    â”œâ”€ Used by all apps (meal, fitness, admin)
    â””â”€ Single source of truth

4ï¸âƒ£  THE FIX: JWT token now includes:
    â”œâ”€ role (was missing, now added âœ“)
    â””â”€ status (was missing, now added âœ“)

5ï¸âƒ£  RESULT: Admin users work everywhere!
    â”œâ”€ Meal Planner: Admin features visible âœ“
    â”œâ”€ Fitness: Admin features visible âœ“
    â”œâ”€ Admin Panel: Full access âœ“
    â””â”€ AI Coach: Proper permissions âœ“

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Database & Infrastructure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                          â”‚
â”‚  INFRASTRUCTURE MAP                                      â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ VERCEL (Frontend Hosting)                        â”‚  â”‚
â”‚  â”‚ https://meal-planner-gold-one.vercel.app/       â”‚  â”‚
â”‚  â”‚ â”œâ”€ React app                                    â”‚  â”‚
â”‚  â”‚ â”œâ”€ Client-side authentication (Google OAuth)   â”‚  â”‚
â”‚  â”‚ â””â”€ Makes API calls to Render backend           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                    â”‚ (HTTPS)                            â”‚
â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                    â”‚                  â”‚                 â”‚
â”‚                    â–¼                  â–¼                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ RENDER (Backend)         â”‚   â”‚ GOOGLE OAUTH       â”‚â”‚
â”‚  â”‚ meal-planner-app-mve2... â”‚   â”‚ (External Service) â”‚â”‚
â”‚  â”‚                          â”‚   â”‚                    â”‚â”‚
â”‚  â”‚ Node.js/Express Server   â”‚   â”‚ Authenticates      â”‚â”‚
â”‚  â”‚ â”œâ”€ API endpoints         â”‚   â”‚ users with Google  â”‚â”‚
â”‚  â”‚ â”œâ”€ OAuth handling        â”‚   â”‚ credentials        â”‚â”‚
â”‚  â”‚ â”œâ”€ JWT validation        â”‚   â”‚                    â”‚â”‚
â”‚  â”‚ â””â”€ Database queries      â”‚   â”‚                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                    â”‚ (DATABASE_URL)                     â”‚
â”‚                    â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ RENDER POSTGRESQL (PRIMARY DATABASE)             â”‚  â”‚
â”‚  â”‚ â”œâ”€ users (id, email, role, status, google_id)  â”‚  â”‚
â”‚  â”‚ â”œâ”€ meals (id, user_id, meal_data)              â”‚  â”‚
â”‚  â”‚ â”œâ”€ fitness_profiles (id, user_id, ...)         â”‚  â”‚
â”‚  â”‚ â”œâ”€ fitness_workouts (id, user_id, ...)         â”‚  â”‚
â”‚  â”‚ â”œâ”€ fitness_goals (id, user_id, ...)            â”‚  â”‚
â”‚  â”‚ â””â”€ ... other tables                             â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚ Used by: BOTH meal app & fitness app            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ NEON POSTGRESQL (UNUSED)                         â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚ Status: â†¯ NOT USED                             â”‚  â”‚
â”‚  â”‚ Reason: Both apps hardcoded to use Render DB   â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚ Recommendation: Delete or ignore               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**All detailed flows documented in:**
- `COMPLETE_LOGIN_AUTHENTICATION_FLOW_DIAGRAM.md` (comprehensive)
- `LOGIN_FLOW_QUICK_REFERENCE.md` (quick reference)
- This file (visual summary)
